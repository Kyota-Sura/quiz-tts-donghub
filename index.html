<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Teka-Teki Silang (Donghua)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <style>
    body {
      background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
      min-height: 100vh;
    }
    
    .glass-effect {
      backdrop-filter: blur(16px);
      background: rgba(30, 30, 30, 0.8);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .gradient-border {
      background: linear-gradient(135deg, #6366f1, #8b5cf6, #ec4899);
      padding: 2px;
      border-radius: 12px;
    }
    
    .gradient-border > div {
      background: #1f1f1f;
      border-radius: 10px;
    }
    
    .cell {
      transition: all 0.3s ease;
    }
    
    .cell:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
    }
    
    .pulse-animation {
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    .floating {
      animation: floating 3s ease-in-out infinite;
    }
    
    @keyframes floating {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    .neon-text {
      text-shadow: 0 0 10px #6366f1, 0 0 20px #6366f1, 0 0 30px #6366f1;
    }
    
    .correct-cell {
      background: linear-gradient(135deg, #10b981, #059669) !important;
      box-shadow: 0 0 15px rgba(16, 185, 129, 0.5);
    }
    
    .incorrect-cell {
      background: linear-gradient(135deg, #ef4444, #dc2626) !important;
      box-shadow: 0 0 15px rgba(239, 68, 68, 0.5);
    }
  </style>
</head>
<body class="text-white font-mono">
  <div class="container mx-auto px-4 py-8">
    <!-- Header -->
    <div class="text-center mb-8">
      <h1 class="text-5xl font-bold mb-4 neon-text">üéÆ Teka-Teki Silang</h1>
      <p class="text-xl text-gray-300">(Donghua Edition)</p>
      <div class="w-24 h-1 bg-gradient-to-r from-purple-500 to-pink-500 mx-auto mt-4 rounded-full"></div>
    </div>

    <!-- Identity Form -->
    <div class="gradient-border max-w-md mx-auto mb-8" id="identity-form">
      <div class="p-8">
        <div class="flex items-center justify-center mb-6">
          <i data-lucide="user" class="w-8 h-8 text-purple-400 mr-3"></i>
          <h2 class="text-2xl font-bold">Login Player</h2>
        </div>
        
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-300 mb-2">
              <i data-lucide="at-sign" class="w-4 h-4 inline mr-2"></i>
              Username Discord:
            </label>
            <input 
              type="text" 
              id="player-discord" 
              placeholder="Contoh: @kyotasura"
              class="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all"
            >
          </div>
          
          <button 
            onclick="startGame()"
            class="w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 flex items-center justify-center"
          >
            <i data-lucide="play" class="w-5 h-5 mr-2"></i>
            Mulai Main
          </button>
        </div>
      </div>
    </div>

    <!-- Timer -->
    <div class="text-center mb-6 hidden" id="timer">
      <div class="inline-flex items-center glass-effect px-6 py-3 rounded-full">
        <i data-lucide="timer" class="w-6 h-6 text-yellow-400 mr-3"></i>
        <span class="text-2xl font-bold">Waktu: <span id="time" class="text-yellow-400">00:00</span></span>
      </div>
    </div>

    <!-- Game Container -->
    <div class="flex flex-wrap justify-center gap-8 mb-8 hidden" id="game-container">
      <!-- Grid -->
      <div class="gradient-border">
        <div class="p-6">
          <div id="crossword-grid" class="grid grid-cols-12 gap-1 w-fit mx-auto"></div>
        </div>
      </div>

      <!-- Clues -->
      <div class="glass-effect p-6 rounded-xl max-w-sm">
        <div class="space-y-6">
          <div>
            <h3 class="text-xl font-bold mb-4 flex items-center">
              <i data-lucide="arrow-right" class="w-5 h-5 text-green-400 mr-2"></i>
              Petunjuk Mendatar
            </h3>
            <div id="across-clues" class="space-y-2"></div>
          </div>

          <div class="border-t border-gray-600 pt-6">
            <h3 class="text-xl font-bold mb-4 flex items-center">
              <i data-lucide="arrow-down" class="w-5 h-5 text-blue-400 mr-2"></i>
              Petunjuk Menurun
            </h3>
            <div id="down-clues" class="space-y-2"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="text-center mb-6">
      <button 
        id="submit-btn" 
        onclick="submitAnswer()"
        class="hidden bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 text-white font-bold py-4 px-8 rounded-lg transition-all duration-300 transform hover:scale-105 pulse-animation"
      >
        <i data-lucide="send" class="w-5 h-5 mr-2 inline"></i>
        Submit Jawaban
      </button>
    </div>

    <!-- Feedback -->
    <div class="text-center mb-6">
      <div id="feedback" class="text-xl font-bold"></div>
    </div>

    <!-- Admin Button -->
    <div class="text-center mb-6">
      <button 
        id="admin-btn"
        onclick="showAdminLeaderboard()" 
        class="hidden bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105"
      >
        <i data-lucide="shield-check" class="w-5 h-5 mr-2 inline"></i>
        üîê Lihat Leaderboard (Admin)
      </button>
    </div>

    <!-- Leaderboard -->
    <div class="text-center mb-6">
      <h2 id="leaderboard-title" class="text-3xl font-bold mb-6 hidden neon-text">
        <i data-lucide="trophy" class="w-8 h-8 inline mr-3"></i>
        üèÜ Leaderboard
      </h2>
    </div>
    
    <div class="overflow-x-auto">
      <table id="leaderboard-table" class="hidden w-full glass-effect rounded-xl overflow-hidden">
        <thead>
          <tr class="bg-gradient-to-r from-purple-600 to-pink-600">
            <th class="px-6 py-4 text-left font-bold">
              <i data-lucide="medal" class="w-4 h-4 inline mr-2"></i>
              Rank
            </th>
            <th class="px-6 py-4 text-left font-bold">
              <i data-lucide="user" class="w-4 h-4 inline mr-2"></i>
              Nama
            </th>
            <th class="px-6 py-4 text-left font-bold">
              <i data-lucide="at-sign" class="w-4 h-4 inline mr-2"></i>
              Discord
            </th>
            <th class="px-6 py-4 text-left font-bold">
              <i data-lucide="clock" class="w-4 h-4 inline mr-2"></i>
              Waktu
            </th>
            <th class="px-6 py-4 text-left font-bold">
              <i data-lucide="check-circle" class="w-4 h-4 inline mr-2"></i>
              Status
            </th>
            <th class="px-6 py-4 text-left font-bold">
              <i data-lucide="star" class="w-4 h-4 inline mr-2"></i>
              Skor
            </th>
            <th class="px-6 py-4 text-left font-bold">
              <i data-lucide="settings" class="w-4 h-4 inline mr-2"></i>
              Aksi
            </th>
          </tr>
        </thead>
        <tbody id="leaderboard-body"></tbody>
      </table>
    </div>
  </div>

  <script>
    // Initialize Lucide icons
    lucide.createIcons();

    // === DATA PEMAIN ===
    let player = {
      name: "",    // Akan diisi dengan username Discord
      discord: ""
    };

    // === KONFIGURASI TTS ===
    const solution = [
      [null, null, null, null, null, null, null, null, null, null, null, null],
      [null, null, null, null, null, null, null, null, null, null, null, null],
      [null, null, null, null, null, null, null, null, null, null, null, null],
      [null, null, null, null, null, null, null, null, null, null, null, null],
      [null, null, null, null, null, null, null, null, null, null, null, null],
      [null, null, null, null, null, null, null, null, null, null, null, null],
      [null, null, null, null, null, null, null, null, null, null, null, null],
      [null, null, null, null, null, null, null, null, null, null, null, null],
      [null, null, null, null, null, null, null, null, null, null, null, null],
      [null, null, null, null, null, null, null, null, null, null, null, null],
      [null, null, null, null, null, null, null, null, null, null, null, null],
      [null, null, null, null, null, null, null, null, null, null, null, null]
    ];

    // Isi grid dengan jawaban
    // Soal 1: TANG SAN (7 huruf) - mendatar
    solution[0][0] = 'T'; solution[0][1] = 'A'; solution[0][2] = 'N'; solution[0][3] = 'G'; solution[0][4] = ' '; solution[0][5] = 'S'; solution[0][6] = 'A'; solution[0][7] = 'N';
    
    // Soal 2: GIGIT (5 huruf) - menurun
    solution[0][3] = 'G'; solution[1][3] = 'I'; solution[2][3] = 'G'; solution[3][3] = 'I'; solution[4][3] = 'T';
    
    // Soal 3: EARTHS HOPE (11 huruf) - mendatar
    solution[2][0] = 'E'; solution[2][1] = 'A'; solution[2][2] = 'R'; solution[2][3] = 'T'; solution[2][4] = 'H'; solution[2][5] = 'S'; solution[2][6] = ' '; solution[2][7] = 'H'; solution[2][8] = 'O'; solution[2][9] = 'P'; solution[2][10] = 'E';
    
    // Soal 4: YA FEI (5 huruf) - menurun
    solution[0][1] = 'Y'; solution[1][1] = 'A'; solution[2][1] = ' '; solution[3][1] = 'F'; solution[4][1] = 'E'; solution[5][1] = 'I';
    
    // Soal 5: ELENA (5 huruf) - mendatar
    solution[4][5] = 'E'; solution[4][6] = 'L'; solution[4][7] = 'E'; solution[4][8] = 'N'; solution[4][9] = 'A';
    
    // Soal 6: DOU LUO (7 huruf) - menurun
    solution[0][5] = 'D'; solution[1][5] = 'O'; solution[2][5] = 'U'; solution[3][5] = ' '; solution[4][5] = 'L'; solution[5][5] = 'U'; solution[6][5] = 'O';
    
    // Soal 7: DELAPAN (7 huruf) - mendatar
    solution[6][0] = 'D'; solution[6][1] = 'E'; solution[6][2] = 'L'; solution[6][3] = 'A'; solution[6][4] = 'P'; solution[6][5] = 'A'; solution[6][6] = 'N';
    
    // Soal 8: HORNED BEAST (11 huruf) - menurun
    solution[0][9] = 'H'; solution[1][9] = 'O'; solution[2][9] = 'R'; solution[3][9] = 'N'; solution[4][9] = 'E'; solution[5][9] = 'D'; solution[6][9] = ' '; solution[7][9] = 'B'; solution[8][9] = 'E'; solution[9][9] = 'A'; solution[10][9] = 'S'; solution[11][9] = 'T';
    
    // Soal 9: LI ZHUE (6 huruf) - mendatar
    solution[8][0] = 'L'; solution[8][1] = 'I'; solution[8][2] = ' '; solution[8][3] = 'Z'; solution[8][4] = 'H'; solution[8][5] = 'U'; solution[8][6] = 'E';
    
    // Soal 10: PANG BAO (8 huruf) - menurun
    solution[4][8] = 'P'; solution[5][8] = 'A'; solution[6][8] = 'N'; solution[7][8] = 'G'; solution[8][8] = ' '; solution[9][8] = 'B'; solution[10][8] = 'A'; solution[11][8] = 'O';

    const acrossClues = [
      { number: 1, clue: "Salah satu MC donghua terpopuler saat ini, dan pernah menggunakan nama samaran ", row: 0, col: 0 },
      { number: 3, clue: "Apa nama julukan Luo Feng yang paling famous", row: 2, col: 0 },
      { number: 5, clue: "Siapakah nama wanita yang dekat dengan Luo Feng selain Xu Xin ", row: 4, col: 5 },
      { number: 7, clue: "Berapa murid Ye Fan ", row: 6, col: 0 },
      { number: 9, clue: "Sahabat Wang Lin yang paling setia dan humoris ", row: 8, col: 0 },
      { number: 10, clue: "Sahabat Ye Fan sejak awal perjalanan", row: 4, col: 8 }
    ];

    const downClues = [
      { number: 1, clue: "Salah satu MC donghua terpopuler saat ini, dan pernah menggunakan nama samaran ", row: 0, col: 0 },
      { number: 2, clue: "Pada donghua BTTH perjanjaian 3 tahun ep 5, Xiao Yan membelikan Medusa sepatu dan manisan buah, bagaimana cara Medusa mengkonsumsi manisan tersebut?", row: 0, col: 3 },
      { number: 4, clue: "Salah satu wanita yang dekat dengan Xiao Yan dan usia lebih tua darinya", row: 0, col: 1 },
      { number: 6, clue: "Nama sistem kultivasi dalam Soul Land yang mengklasifikasikan kekuatan seseorang berdasarkan roh perang", row: 0, col: 5 },
      { number: 8, clue: "Apa nama hewan langka yang menjadi tubuh ke dua Shi Hao", row: 0, col: 9 }
    ];

    let startTime, endTime;
    let timerInterval;
    let isCorrect = false;
    let gameStarted = false;

    // === CEK APAKAH SUDAH LOGIN ===
    function checkLoginStatus() {
      const savedPlayer = localStorage.getItem("tts-player");
      const savedStartTime = localStorage.getItem("tts-start-time");
      
      if (savedPlayer) {
        player = JSON.parse(savedPlayer);
        gameStarted = true;
        
        // Tampilkan game
        document.getElementById("timer").classList.remove("hidden");
        document.getElementById("game-container").classList.remove("hidden");
        document.getElementById("submit-btn").classList.remove("hidden");
        document.getElementById("admin-btn").classList.remove("hidden");
        document.getElementById("identity-form").classList.add("hidden");
        
        // Mulai permainan
        renderGrid();
        renderClues();
        startTimer();
      }
    }

    // === MULAI GAME ===
    function startGame() {
      const discord = document.getElementById("player-discord").value.trim();

      if (!discord) {
        alert("Mohon isi username Discord!");
        return;
      }

      // Gunakan username Discord sebagai nama
      player.name = discord;
      player.discord = discord;
      
      // Simpan data pemain
      localStorage.setItem("tts-player", JSON.stringify(player));

      // Simpan waktu mulai ke localStorage
      const now = new Date().getTime();
      localStorage.setItem("tts-start-time", now.toString());
      
      gameStarted = true;
      
      // Tampilkan game
      document.getElementById("timer").classList.remove("hidden");
      document.getElementById("game-container").classList.remove("hidden");
      document.getElementById("submit-btn").classList.remove("hidden");
      document.getElementById("admin-btn").classList.remove("hidden");
      document.getElementById("identity-form").classList.add("hidden");

      // Mulai permainan
      renderGrid();
      renderClues();
      startTimer();
    }

    // === RENDER GRID ===
    function renderGrid() {
      const grid = document.getElementById("crossword-grid");
      grid.innerHTML = "";

      for (let row = 0; row < 12; row++) {
        for (let col = 0; col < 12; col++) {
          const cell = document.createElement("div");
          cell.className = "cell w-10 h-10 border border-gray-600 flex items-center justify-center font-bold relative transition-all duration-300";
          
          if (solution[row][col] === null) {
            cell.classList.add("bg-gray-900");
          } else {
            cell.classList.add("bg-gray-700", "hover:bg-gray-600");
            const input = document.createElement("input");
            input.type = "text";
            input.maxLength = 1;
            input.dataset.row = row;
            input.dataset.col = col;
            input.className = "w-full h-full text-center bg-transparent text-white font-bold text-lg focus:outline-none focus:bg-gray-600";
            input.addEventListener("input", function () {
              this.value = this.value.toUpperCase();
            });
            cell.appendChild(input);

            // Tambah nomor clue
            const acrossNumber = acrossClues.find(c => c.row === row && c.col === col);
            const downNumber = downClues.find(c => c.row === row && c.col === col);
            const number = acrossNumber || downNumber;
            if (number) {
              const numLabel = document.createElement("span");
              numLabel.textContent = number.number;
              numLabel.className = "absolute top-0 left-0.5 text-xs text-blue-400 font-bold";
              cell.appendChild(numLabel);
            }
          }
          grid.appendChild(cell);
        }
      }
    }

    // === TAMPILKAN PETUNJUK ===
    function renderClues() {
      const acrossEl = document.getElementById("across-clues");
      const downEl = document.getElementById("down-clues");
      acrossEl.innerHTML = "";
      downEl.innerHTML = "";

      acrossClues.forEach(clue => {
        const div = document.createElement("div");
        div.className = "text-sm bg-gray-800 p-3 rounded-lg border-l-4 border-green-400";
        div.innerHTML = `<span class="font-bold text-green-400">${clue.number} Mendatar:</span><br><span class="text-gray-300">${clue.clue}</span>`;
        acrossEl.appendChild(div);
      });

      downClues.forEach(clue => {
        const div = document.createElement("div");
        div.className = "text-sm bg-gray-800 p-3 rounded-lg border-l-4 border-blue-400";
        div.innerHTML = `<span class="font-bold text-blue-400">${clue.number} Menurun:</span><br><span class="text-gray-300">${clue.clue}</span>`;
        downEl.appendChild(div);
      });
    }

    // === TIMER ===
    function startTimer() {
      // Cek apakah ada waktu mulai tersimpan
      const savedStartTime = localStorage.getItem("tts-start-time");
      if (savedStartTime) {
        startTime = new Date(parseInt(savedStartTime));
      } else {
        startTime = new Date();
        localStorage.setItem("tts-start-time", startTime.getTime().toString());
      }

      timerInterval = setInterval(() => {
        const now = new Date();
        const elapsed = Math.floor((now - startTime) / 1000);
        const minutes = Math.floor(elapsed / 60);
        const seconds = elapsed % 60;
        document.getElementById("time").textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
      }, 1000);
    }

    // === SUBMIT JAWABAN ===
    function submitAnswer() {
      const inputs = document.querySelectorAll(".cell input");
      let correctCount = 0;
      let totalLetters = 0;

      inputs.forEach(input => {
        const row = parseInt(input.dataset.row);
        const col = parseInt(input.dataset.col);
        const user = input.value.toUpperCase();
        const correctChar = solution[row][col];

        if (correctChar !== null) {
          totalLetters++;
          const cell = input.parentElement;
          if (user === correctChar) {
            correctCount++;
            cell.classList.add("correct-cell");
          } else {
            cell.classList.add("incorrect-cell");
          }
        }
      });

      isCorrect = (correctCount === totalLetters);
      endTime = new Date();
      clearInterval(timerInterval);

      // Hapus data dari localStorage setelah selesai
      localStorage.removeItem("tts-start-time");
      localStorage.removeItem("tts-player");

      const feedback = document.getElementById("feedback");
      if (isCorrect) {
        feedback.innerHTML = `
          <div class="glass-effect p-6 rounded-xl inline-block">
            <div class="flex items-center text-green-400">
              <i data-lucide="check-circle" class="w-8 h-8 mr-3"></i>
              <span class="text-2xl">üéâ Semua jawaban benar!</span>
            </div>
          </div>
        `;
      } else {
        const accuracy = ((correctCount / totalLetters) * 100).toFixed(1);
        feedback.innerHTML = `
          <div class="glass-effect p-6 rounded-xl inline-block">
            <div class="flex items-center text-red-400">
              <i data-lucide="x-circle" class="w-8 h-8 mr-3"></i>
              <span class="text-2xl">‚ùå ${correctCount}/${totalLetters} huruf benar. Akurasi: ${accuracy}%</span>
            </div>
          </div>
        `;
      }

      // Re-initialize Lucide icons for new elements
      lucide.createIcons();

      saveToLeaderboard();
      
      // Reset game state
      gameStarted = false;
    }

    // === SIMPAN KE LEADERBOARD ===
    function saveToLeaderboard() {
      // Hitung waktu berdasarkan startTime yang tersimpan
      const savedStartTime = localStorage.getItem("tts-start-time");
      if (savedStartTime) {
        startTime = new Date(parseInt(savedStartTime));
      }
      
      const timeElapsed = (endTime - startTime) / 1000;
      const score = Math.round((isCorrect ? 1000 : 500) / (timeElapsed / 10 + 1));

      const entry = {
        name: player.name,
        discord: player.discord,
        time: timeElapsed.toFixed(1),
        status: isCorrect ? "Benar" : "Salah",
        score
      };

      let leaderboard = JSON.parse(localStorage.getItem("tts-leaderboard")) || [];
      leaderboard.push(entry);

      // Urutkan: yang benar dulu, lalu skor tertinggi
      leaderboard.sort((a, b) => {
        if (a.status !== b.status) return a.status === "Benar" ? -1 : 1;
        return b.score - a.score;
      });

      // Batasi 20
      leaderboard = leaderboard.slice(0, 20);
      localStorage.setItem("tts-leaderboard", JSON.stringify(leaderboard));

      alert(`Terima kasih, ${player.name}! Jawaban kamu telah dikirim ke leaderboard.`);
    }

    // === LIHAT LEADERBOARD (ADMIN) ===
    function showAdminLeaderboard() {
      const password = prompt("Masukkan password admin:");
      if (password !== "77506720") {
        alert("Password salah!");
        return;
      }

      const leaderboard = JSON.parse(localStorage.getItem("tts-leaderboard")) || [];
      const tbody = document.getElementById("leaderboard-body");
      tbody.innerHTML = "";

      leaderboard.forEach((entry, index) => {
        const rank = index + 1;
        const medal = rank === 1 ? "ü•á" : rank === 2 ? "ü•à" : rank === 3 ? "ü•â" : rank;

        const tr = document.createElement("tr");
        tr.className = "border-b border-gray-600 hover:bg-gray-800 transition-colors";
        tr.innerHTML = `
          <td class="px-6 py-4 font-bold text-yellow-400">${medal}</td>
          <td class="px-6 py-4">${entry.name}</td>
          <td class="px-6 py-4">
            <code class="bg-gray-700 px-2 py-1 rounded text-cyan-400">${entry.discord}</code>
          </td>
          <td class="px-6 py-4 text-orange-400 font-bold">${entry.time}s</td>
          <td class="px-6 py-4">
            <span class="${entry.status === 'Benar' ? 'text-green-400' : 'text-red-400'} font-bold flex items-center">
              <i data-lucide="${entry.status === 'Benar' ? 'check' : 'x'}" class="w-4 h-4 mr-2"></i>
              ${entry.status}
            </span>
          </td>
          <td class="px-6 py-4 text-purple-400 font-bold">${entry.score}</td>
          <td class="px-6 py-4">
            <button class="bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-lg transition-all flex items-center" onclick="deleteEntry(this)">
              <i data-lucide="trash-2" class="w-4 h-4 mr-1"></i>
              Hapus
            </button>
          </td>
          `;
        tbody.appendChild(tr);
      });

      document.getElementById("leaderboard-title").style.display = "block";
      document.querySelector(".leaderboard").style.display = "table";
    }

    // === HAPUS ENTRI DARI LEADERBOARD ===
    function deleteEntry(button) {
      if (!confirm("Apakah kamu yakin ingin menghapus entri ini?")) {
        return;
      }

      const row = button.closest('tr');
      const name = row.cells[1].textContent;
      const discord = row.cells[2].textContent;

      let leaderboard = JSON.parse(localStorage.getItem("tts-leaderboard")) || [];
      leaderboard = leaderboard.filter(entry => entry.name !== name || entry.discord !== discord);

      localStorage.setItem("tts-leaderboard", JSON.stringify(leaderboard));

      // Hapus baris dari tabel
      row.remove();

      alert("‚úÖ Entri berhasil dihapus!");
    }

    // === HANDLE TAB/APP SWITCH ===
    window.addEventListener('beforeunload', function() {
      // Timer tetap berjalan karena menggunakan localStorage
    });

    // === CEK STATUS LOGIN SAAT HALAMAN DIMUAT ===
    window.addEventListener('load', function() {
      checkLoginStatus();
    });
  </script>
</body>
</html>
